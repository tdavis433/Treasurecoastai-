# Treasure Coast AI - Agency-First AI Chatbot Platform

## Overview
Treasure Coast AI is an **agency-first** AI assistant platform. The agency (admin) builds and manages custom AI chatbots FOR local businesses. Clients do NOT build bots — they only log in to view results (conversations, leads, bookings) through a simple dashboard.

**Core Mission:** "Give local businesses a 24/7 AI assistant that captures leads, books appointments, and answers questions – all managed for them by our agency, with a simple dashboard that shows results."

## Business Model (Agency → Client)

### Agency Owner (Admin)
- Logs into admin panel at `/super-admin`
- Creates and configures AI assistants for each client business:
  - Business info (services, pricing, hours, location)
  - AI personality & instructions
  - FAQs and common questions
  - Website scraping to learn the business
  - Automations (keywords → replies, booking suggestions)
- Generates widget embed code for client websites
- Manages all bot settings and updates

### Client Business (Customers)
- Gets a clean, simple client dashboard at `/client/dashboard`
- **Fully VIEW-ONLY** - They can see but not change:
  - Conversations the bot has handled
  - Leads captured (name, email, phone, what they wanted)
  - Bookings/appointments generated by the bot
  - Simple stats (total conversations, leads, bookings)
- Settings are display-only:
  - Assistant status (shows "Live" badge - always active)
  - Business information on file
  - Widget embed code (can copy)
- All changes require contacting the agency team

### End Users (Website Visitors)
- See chat widget on business website
- Chat with AI assistant
- Get answers, leave contact info, book appointments
- All interactions logged for client dashboard

## Design Philosophy
**Dark Luxury SaaS with Neon-Glass Accents** - Premium aesthetic inspired by Linear, Vercel, and Stripe:
- Deep blacks (#000000, #0A0A0F) with sophisticated depth
- Glassmorphism cards with backdrop blur and subtle borders
- Vibrant cyan primary (#00E5CC) with electric purple secondary (#A855F7)
- Neon glow effects and smooth micro-animations
- Premium feel that makes people say "damn I gotta try this"

## Two-Surface System
1. **Admin Dashboard (Agency Side):** Powerful bot builder with website scraping, knowledge management, FAQs, personality customization, widget design, and deployment tools
2. **Client Dashboard:** Simple view-only analytics showing conversations, leads, bookings - clients contact agency for any changes

## Key Features

### Website Scraper (Admin Only)
- Admin pastes client's website URL
- AI extracts business information (name, services, pricing, FAQs, hours, contact)
- GPT-4 structures raw content into clean JSON
- Admin reviews/tweaks extracted data before deployment
- One-click to populate bot knowledge base

### AI Engine (GPT-4 Powered)
- World-class conversational AI that handles any question brilliantly
- Dynamic context building from bot settings, knowledge, FAQs, services
- Smart lead detection (name/email/phone extraction)
- Booking intent recognition with calendar link suggestions
- Safety layer with graceful fallbacks

### Chat Widget
- Gorgeous glassmorphism design with neon accents
- Smooth animations (pulse, slide-up, typing indicator)
- Customizable colors, position, avatar
- Lightweight embed.js for client websites
- Mobile responsive

### Client Analytics (View Only)
- Conversation history with AI summaries
- Lead management with status tracking
- Booking overview
- Simple settings (bot on/off, notification email)

## Tech Stack
- **Frontend:** React 18, TypeScript, Tailwind CSS, shadcn/ui, Framer Motion
- **Backend:** Express.js, Node.js
- **Database:** PostgreSQL (Neon) with Drizzle ORM
- **AI:** OpenAI GPT-4
- **Payments:** Stripe integration

## Authentication
- **Admin:** admin / admin123 (super admin with full access to build bots)
- **Clients:** Individual accounts with dashboard view-only access

## API Endpoints

### Core
- `POST /api/chat/:clientId/:botId` - AI chat interaction
- `GET /api/widget/:botId` - Widget configuration

### Admin (Protected)
- `GET/POST /api/clients` - Manage client businesses
- `GET/PUT /api/bots/:botId` - Bot configuration
- `POST /api/scrape` - Website scraper
- `GET /api/analytics` - Platform analytics

### Client Dashboard (Protected)
- `GET /api/client/conversations` - View conversations
- `GET /api/client/leads` - View/update leads
- `GET /api/client/stats` - Dashboard statistics

## File Structure
```
client/src/
├── pages/
│   ├── home.tsx           - Landing page (agency service pitch)
│   ├── demos.tsx          - Live demo bots showcase
│   ├── login.tsx          - Authentication
│   ├── admin-dashboard.tsx - Admin overview
│   ├── control-center.tsx  - Bot builder (admin only)
│   └── client-dashboard.tsx - Client view-only analytics
├── components/
│   └── ui/                - shadcn components
server/
├── routes.ts              - API endpoints
├── botConfig.ts           - Bot configuration
├── storage.ts             - Database layer
└── env.ts                 - Environment validation
shared/
└── schema.ts              - Drizzle schemas
```

## Environment Variables
- `OPENAI_API_KEY` - GPT-4 access
- `DATABASE_URL` - PostgreSQL connection
- `DEFAULT_ADMIN_PASSWORD` - Admin password override
- `WIDGET_TOKEN_SECRET` - Widget authentication
- `STRIPE_SECRET_KEY` - Payment processing

## Recent Changes (Dec 2024)
- **Platform is agency-first model** - Agency builds bots FOR clients
- Landing page messaging: "We build and manage AI assistants for local businesses"
- Client dashboard is VIEW ONLY - shows conversations, leads, bookings
- CTAs updated: "Get Started — We Build It For You"
- Removed self-service language throughout platform
- Trust indicators: "Fully managed service", "We handle setup", "Ongoing support"
- How it works steps: "Share Your Info" → "We Build It" → "You See Results"
- All core platform features tested and verified working end-to-end
- **Major client dashboard overhaul completed**: Simplified from 8 tabs to 5 tabs (Overview, Conversations, Leads, Bookings, Settings)
- Removed all technical sections: Integrations (webhooks), detailed Analytics (crisis events, response times, topic breakdown)
- Fixed critical functionality issues: Removed non-functional controls (bot toggle, notifications, widget color picker)
- Settings now truly view-only: Shows business info and embed code with clear "contact agency for changes" messaging
- Maintained premium dark luxury glassmorphism design throughout all changes
- **Admin Command Center redesign completed**:
  - Header: Premium gradient logo, "Agency Dashboard" subtitle, user avatar with initials
  - Command Center header with "Super Admin" badge and quick action buttons (New Client, New Bot)
  - Navigation tabs in pill-style container: Overview, Clients (renamed from Workspaces), Analytics, System Logs, Users
  - Enhanced stats overview showing platform-wide metrics: Conversations, Leads, Bookings, Total Assistants
  - Quick status row with Active Clients, Demo Bots, Paused counts
  - Left sidebar: "Client Assistants" title with badge count, improved search
  - Terminology updated throughout: "Workspaces" → "Clients" to match agency-first model
- **Auto-generated login credentials feature**:
  - When admin creates a new client, system generates login credentials automatically
  - Create Client modal: Enter business name and client email
  - System creates: User account, workspace, AI assistant bot, and all default settings
  - Credentials modal shows: Email, temporary password, and dashboard URL
  - Copy buttons for easy sharing with clients
  - Secure password generation using crypto.randomBytes
- **Enhanced Client Dashboard Analytics (Dec 2024)**:
  - Trend indicators on stat cards: Shows +/-% change vs previous period (green/red arrows)
  - Lead Funnel visualization: Progress bars for New → Contacted → Qualified → Converted pipeline
  - Peak Activity Hours chart: Bar visualization of when visitors chat most (top 5 hours)
  - CSV Export: Download conversations to CSV with one click
  - Bookings filters: Search by name/contact and filter by date range (7/30 days/All)
  - "What they wanted" field: Shows conversation context for each lead
  - Notification email display in Settings section
  - Last activity timestamp shown on Activity card
- **Landing Page Enhancements (Dec 2024)**:
  - Fixed routing: Landing page (home.tsx) now at root "/" instead of "/faith-house"
  - Added Pricing Section: 3 tiers (Starter $297, Professional $497, Enterprise Custom) with features lists
  - Added Testimonials Section: 3 testimonial cards with star ratings and business owner quotes
  - Added FAQ Section: 5 expandable accordion items with common questions
  - Added Contact Form: Name, email, phone, message fields with toast notification on submit
  - All sections styled with premium glassmorphism design matching existing aesthetic

## Control Center Features (Admin Only)
The admin Control Center at `/super-admin` provides comprehensive "god mode" platform management:

### Dashboard Sections
- **Overview Tab:** Platform-wide metrics with 7/30 day toggle, activity trends chart, top-performing assistants, platform status
- **Clients Tab:** Client list with search/filter, status badges (Active/Paused/Trial), plan info, "View as Client" impersonation
- **Assistants Tab:** Global assistant view with filters by client/status, duplicate/pause/activate, bulk actions, key metrics
- **Templates Tab:** Template gallery with 6 niche categories (Restaurant, Barber, Auto Shop, Home Services, Gym, Sober Living), create-from-template flow
- **Knowledge Tab:** Global knowledge management filtered by client/assistant, FAQ counts, bulk reindex/remove actions
- **Integrations Tab:** API keys hub showing OpenAI, Stripe status with Connected/Not Configured/Error badges
- **Billing Tab:** Plan management with Starter/Professional/Enterprise tiers, assign plans to clients, revenue overview, usage vs limits
- **Analytics Tab:** Charts and trends, export to CSV
- **System Tab:** System health & logs with multi-dimensional filtering (level, status, source, client), critical issues alert
- **Users Tab:** Role hierarchy management (SUPER_ADMIN, AGENCY_USER, CLIENT_OWNER, CLIENT_USER), invite flow, permissions display

### Assistant Editor (Bot Builder)
- **Overview:** Bot stats and quick actions
- **Persona & System Prompt:** AI personality, tone, behavior customization
- **Knowledge/Content:** FAQs, scraped content, custom knowledge base
- **Automations/Flows:** Keyword triggers, booking suggestions
- **Channels & Embeds:** Widget customization, embed code generator
- **Testing Sandbox:** Inline chat tester with raw request/response debugging
- **Advanced AI Settings:** Model selection, temperature, safety layers

### Backend API Enhancements
- Client impersonation: `POST /api/super-admin/impersonate/:clientId`, `POST /api/super-admin/end-impersonation`
- Workspace plan management: `PATCH /api/super-admin/workspaces/:slug/plan`
- Template cloning: `POST /api/super-admin/clients/from-template`
- Global knowledge view, bulk operations, and more

## What This Platform Is & Is NOT
✅ **Should be:**
- Simple, clean, and stable
- Focused on AI chat + lead capture + bookings + insights
- Optimized for local businesses and agencies
- Easy for agency to set up bots for many different clients

❌ **Should NOT be:**
- A huge "no-code app builder"
- A fully open "build your own AI workflows" marketplace
- A complex Intercom/HubSpot clone with 1,000 features
