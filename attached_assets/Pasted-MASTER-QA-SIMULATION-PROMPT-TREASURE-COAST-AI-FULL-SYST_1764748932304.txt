MASTER QA / SIMULATION PROMPT ‚Äî TREASURE COAST AI FULL SYSTEM TEST

You are working on the Treasure Coast AI platform ‚Äî an agency-first, multi-tenant AI assistant system.

Non-negotiable business rules:
	‚Ä¢	The agency (me) builds & manages all AI assistants.
	‚Ä¢	Clients ONLY log in to view conversations, leads, analytics, etc.
	‚Ä¢	Clients do not configure, build, or edit bots.
	‚Ä¢	Each business is isolated by clientId / workspaceId.
	‚Ä¢	The system now includes:
	‚Ä¢	Super admin area
	‚Ä¢	Client dashboard
	‚Ä¢	AI chat backend
	‚Ä¢	Embeddable widget with token + domain security
	‚Ä¢	‚ÄúNeeds Review‚Äù system
	‚Ä¢	‚ÄúRebuild Knowledge‚Äù button
	‚Ä¢	Enhanced client analytics
	‚Ä¢	Client login creation with client_admin role
	‚Ä¢	mustChangePassword + disabled flags for logins

Your task:

Run a full end-to-end simulation of onboarding a brand-new client, configuring their AI assistant, embedding it, chatting with it, and verifying that everything works correctly ‚Äî then give me a brutally honest QA report + opinion of the finished assistant and system.

Do NOT change the business model.
Do NOT remove or downgrade security.
If you need to adjust minor implementation details, do so in a minimal, backwards-compatible way.

‚∏ª

üß© TEST SCENARIO: ‚ÄúSunrise Auto Repair‚Äù

Simulate a real small business client:
	‚Ä¢	Business Name: Sunrise Auto Repair
	‚Ä¢	Type: Auto repair shop
	‚Ä¢	Website URL (for test): https://example.com/sunrise-auto (can be a dummy HTML page / test fixture)
	‚Ä¢	Services:
	‚Ä¢	Oil changes
	‚Ä¢	Brake repair
	‚Ä¢	Engine diagnostics
	‚Ä¢	AC repair
	‚Ä¢	Tire rotation & replacement
	‚Ä¢	Location: 1234 Palm Ave, Treasure Coast, FL
	‚Ä¢	Hours:
	‚Ä¢	Mon‚ÄìFri: 8am‚Äì6pm
	‚Ä¢	Sat: 9am‚Äì2pm
	‚Ä¢	Sun: closed
	‚Ä¢	Phone: (555) 987-6543
	‚Ä¢	Booking: use a fake booking URL like https://example.com/sunrise-auto/book
	‚Ä¢	Tone: friendly, clear, professional
	‚Ä¢	No crisis handling required for this test.

Use this fictional client through the entire process.

‚∏ª

‚úÖ PHASE 1 ‚Äî Set Up Test Environment
	1.	Create an isolated test client/workspace
	‚Ä¢	Create a new client/workspace in the DB for ‚ÄúSunrise Auto Repair‚Äù.
	‚Ä¢	Use a clearly test-only slug, e.g. sunrise-auto-test.
	‚Ä¢	Make sure it does not interfere with any existing real data.
	2.	Create a test client_admin user
	‚Ä¢	Email: owner@sunrise-auto.test
	‚Ä¢	Role: client_admin
	‚Ä¢	clientId / workspaceId: the Sunrise workspace you just created
	‚Ä¢	Set:
	‚Ä¢	mustChangePassword = true (as per the new flow)
	‚Ä¢	disabled = false
	‚Ä¢	Use a temporary password (you can define any strong password).
	3.	Verify forced password change works
	‚Ä¢	Programmatically simulate:
	‚Ä¢	Login with the temporary password.
	‚Ä¢	Confirm that the system forces redirect/flow to /change-password.
	‚Ä¢	Change password to a new valid password.
	‚Ä¢	Confirm mustChangePassword is now false.
	‚Ä¢	Confirm client_admin lands in the client dashboard (not admin/super admin).

If any of this fails, fix it first before continuing.

‚∏ª

‚úÖ PHASE 2 ‚Äî Simulate Onboarding & AI Setup

Pretend you are me onboarding this client:
	1.	Collect information (simulated)
Use the info from the scenario above (hours, services, links, etc.).
	2.	Apply that info into the system
	‚Ä¢	Ensure Sunrise Auto Repair has:
	‚Ä¢	Correct business name
	‚Ä¢	Website URL saved
	‚Ä¢	Phone number
	‚Ä¢	Booking link
	‚Ä¢	Hours of operation
	‚Ä¢	Service list / FAQ entries (if you have an FAQ/KB area, populate it accordingly).
	3.	Run ‚ÄúRebuild Knowledge‚Äù
	‚Ä¢	Use the existing knowledge rebuild system:
	‚Ä¢	If you have a scraper: simulate scraping the dummy Sunrise site / test fixture.
	‚Ä¢	Regenerate the bot‚Äôs knowledge base for this client.
	‚Ä¢	Confirm:
	‚Ä¢	Bot config is stored with the correct clientId.
	‚Ä¢	Any embeddings / FAQs / summaries are associated with Sunrise, not any other client.
	4.	Configure automations, if available
	‚Ä¢	Lead capture: ensure the bot saves:
	‚Ä¢	name, phone, service requested, etc.
	‚Ä¢	Booking click tracking: ensure it records when users click ‚Äúbook‚Äù / follow the booking link.
	‚Ä¢	‚ÄúNeeds Review‚Äù triggers:
	‚Ä¢	low confidence
	‚Ä¢	unknown questions
	‚Ä¢	dissatisfaction signals
	‚Ä¢	hot lead patterns (if implemented).

‚∏ª

‚úÖ PHASE 3 ‚Äî Widget Embed & Frontend Test
	1.	Generate widget embed snippet
	‚Ä¢	Use the real system that generates a widget snippet for Sunrise Auto Repair.
	‚Ä¢	It should include:
	‚Ä¢	Correct clientId / workspace ID
	‚Ä¢	Bot ID
	‚Ä¢	Valid widget token
	‚Ä¢	Domain restriction, if applicable (for test, you can allow localhost or a test domain).
	2.	Create a test HTML page
	‚Ä¢	A simple static HTML page that simulates the Sunrise Auto Repair website.
	‚Ä¢	Embed the widget snippet you generated.
	‚Ä¢	Run this page in the dev environment (e.g., via Vite dev server or static file in the same environment).
	3.	Verify widget behavior
	‚Ä¢	Ensure:
	‚Ä¢	Widget loads on the page.
	‚Ä¢	It shows the correct greeting (e.g. referencing Sunrise Auto Repair).
	‚Ä¢	It can send and receive messages via the chat endpoint.
	‚Ä¢	Verify the widget token + allowedDomains logic is enforced:
	‚Ä¢	Correct origin works.
	‚Ä¢	A disallowed origin (if you simulate one) is blocked.

‚∏ª

‚úÖ PHASE 4 ‚Äî Simulated User Conversations

Now fully simulate a real user interacting with the Sunrise bot.

Programmatically send a sequence of messages through the chat endpoint (or via automated browser tests) as if from a website visitor:

Conversation 1 ‚Äî General Info
	1.	‚ÄúHi, what do you guys do?‚Äù
	2.	‚ÄúWhat are your hours today?‚Äù
	3.	‚ÄúWhere are you located?‚Äù
	4.	‚ÄúDo you work on Honda Civics?‚Äù

Verify:
	‚Ä¢	Responses are accurate.
	‚Ä¢	Hours match the test data.
	‚Ä¢	Location is correct.
	‚Ä¢	Tone is friendly and professional.

Conversation 2 ‚Äî Lead + Booking Interest
	1.	‚ÄúI need an oil change and maybe brakes checked.‚Äù
	2.	‚ÄúHow much does that usually cost?‚Äù
	3.	‚ÄúCan I book an appointment for Friday?‚Äù
	4.	When prompted, user provides:
	‚Ä¢	Name
	‚Ä¢	Phone
	‚Ä¢	Preferred time

Verify:
	‚Ä¢	Lead is captured correctly:
	‚Ä¢	Type: service inquiry / booking
	‚Ä¢	Service: oil change + brakes
	‚Ä¢	Contact info present
	‚Ä¢	Booking link is shared (if that‚Äôs part of the flow).
	‚Ä¢	Any booking clicks are tracked.

Conversation 3 ‚Äî Edge Cases / Unknowns
	1.	‚ÄúDo you also wrap cars in custom vinyl graphics?‚Äù (service not offered)
	2.	‚ÄúAre you open on Sunday at 7PM?‚Äù (outside hours)
	3.	‚ÄúCan you fix boats?‚Äù

Verify:
	‚Ä¢	Bot gracefully handles unknown services (no hallucinations).
	‚Ä¢	Bot correctly states closed times.
	‚Ä¢	‚ÄúNeeds Review‚Äù flags are applied to:
	‚Ä¢	questions the bot couldn‚Äôt answer
	‚Ä¢	potential upsell opportunities or confusing topics.

‚∏ª

‚úÖ PHASE 5 ‚Äî Verify Admin & Client Dashboards

After the conversations:
	1.	Client dashboard (Sunrise client_admin):
	‚Ä¢	Login as the Sunrise client_admin.
	‚Ä¢	Verify:
	‚Ä¢	Leads list shows the captured lead(s) with correct details.
	‚Ä¢	Conversation history for Sunrise only (no cross-tenant leakage).
	‚Ä¢	Analytics update correctly:
	‚Ä¢	conversation counts
	‚Ä¢	peaks / trends
	‚Ä¢	top questions / topics
	‚Ä¢	funnel (visitor ‚Üí lead)
	‚Ä¢	booking click metrics (if present).
	2.	Super Admin / Admin dashboard:
	‚Ä¢	Login as super_admin.
	‚Ä¢	Open Sunrise client in Control Center.
	‚Ä¢	Verify:
	‚Ä¢	Sunrise bot status is correct (ACTIVE).
	‚Ä¢	Lead funnel and message trends reflect the test conversations.
	‚Ä¢	Popular topics include oil change, brakes, hours, location.
	‚Ä¢	‚ÄúNeeds Review‚Äù section shows the unknown/edge case questions.
	‚Ä¢	‚ÄúRebuild Knowledge‚Äù remains functional and scoped only to Sunrise.
	3.	Security checks:
	‚Ä¢	Ensure that:
	‚Ä¢	The Sunrise client_admin cannot access any other client‚Äôs data.
	‚Ä¢	The Sunrise client_admin cannot edit bots, automations, knowledge, or security settings.
	‚Ä¢	Super_admin still has full control.

‚∏ª

‚úÖ PHASE 6 ‚Äî QA Report & Opinion

After you run all the above:
	1.	Generate a structured QA report, including:
	‚Ä¢	A. Setup & Onboarding
	‚Ä¢	Did creating the workspace, bot, and client_admin account feel smooth?
	‚Ä¢	Any friction points or confusing steps?
	‚Ä¢	B. AI Assistant Quality
	‚Ä¢	Were answers accurate, specific, and helpful?
	‚Ä¢	Any hallucinations or bad guesses?
	‚Ä¢	Did it sound like a real assistant for an auto repair shop?
	‚Ä¢	C. Lead Capture & Conversion
	‚Ä¢	Did the assistant reliably ask for name/contact when appropriate?
	‚Ä¢	Were leads stored cleanly and visible in dashboards?
	‚Ä¢	Did the calls-to-action (booking, calling) make sense?
	‚Ä¢	D. Dashboards (Client & Admin)
	‚Ä¢	Is the client dashboard understandable for a non-technical business owner?
	‚Ä¢	Are analytics easy to interpret?
	‚Ä¢	Are ‚ÄúNeeds Review‚Äù items helpful for ongoing maintenance?
	‚Ä¢	E. Security & Isolation
	‚Ä¢	Did any client-admin have access to things they shouldn‚Äôt?
	‚Ä¢	Are widget token + allowedDomains working as expected?
	‚Ä¢	F. Bugs & Suggestions
	‚Ä¢	List any bugs encountered.
	‚Ä¢	List any confusing UX or missing confirmations.
	‚Ä¢	Suggest concrete improvements that fit the business model:
	‚Ä¢	you build/manage
	‚Ä¢	client views only
	‚Ä¢	no self-service bot builder.
	2.	Give an overall rating and opinion from 1‚Äì10 for:
	‚Ä¢	Production readiness
	‚Ä¢	Onboarding smoothness
	‚Ä¢	Assistant quality for Sunrise Auto Repair
	‚Ä¢	Client dashboard clarity
	‚Ä¢	‚ÄúWould you confidently sell this to a real local business owner right now?‚Äù

Be brutally honest.
Do not sugar-coat issues ‚Äî I want this to be as harsh as a real external QA/PM review.

‚∏ª

Constraints / Notes
	‚Ä¢	Do not redesign the core platform or change the business model.
	‚Ä¢	You may create small helper utilities or test-only routes/files if they help automate the simulation.
	‚Ä¢	Keep test data clearly isolated so it can be cleaned up (e.g., Sunrise auto fixtures).
	‚Ä¢	Where possible, write automated tests (integration or end-to-end) so this scenario can be re-run in the future with one command.